<h2>Kanban Board</h2>
<div class="kanban-container">
    <div class="kanban-column" *ngFor="let col of columns" cdkDropList [cdkDropListData]="col.tasks" [id]="col.status"
        [cdkDropListConnectedTo]="columnIds" (cdkDropListDropped)="onDrop($event, col)">
        <h3 class="column-header">{{ col.label }} ({{ col.tasks.length }})</h3>
        <mat-card *ngFor="let task of col.tasks" cdkDrag class="kanban-card" [class]="'priority-' + task.priority">
            <mat-card-header>
                <mat-card-title>
                    <a [routerLink]="['/tasks', task.id]">{{ task.title }}</a>
                </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <mat-chip [class]="'priority-' + task.priority">{{ task.priority }}</mat-chip>
                <div class="assignees" *ngIf="task.assignees.length">
                    <span *ngFor="let a of task.assignees; let last = last">
                        {{ a.first_name }} {{ a.last_name }}<span *ngIf="!last">, </span>
                    </span>
                </div>
                <div class="deadline" *ngIf="task.deadline">
                    {{ task.deadline | date:'shortDate' }}
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>